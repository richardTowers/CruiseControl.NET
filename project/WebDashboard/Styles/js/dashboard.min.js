(function(){ 
'use strict';angular.module('dash', ['ui.bootstrap', 'ngCookies']);
})();
(function(){ 
'use strict';angular.module('dash').controller('main', ['$scope', function ($scope) {
    $scope.sidebarActive = true;
    $scope.toggleSidebar = function () {
        $scope.sidebarActive = !$scope.sidebarActive;
    };
}]);
})();
(function(){ 
'use strict';angular.module('dash').controller('projectGrid', ['$scope', function ($scope) {
    $scope.shouldShowRow = function (data) {
        return !$scope.projectGridSearch || data.toLowerCase().indexOf($scope.projectGridSearch.toLowerCase()) >= 0;
    };
}]);
})();
(function(){ 
'use strict';angular.module('dash').controller('projectGridExceptions', ['$scope', function ($scope) {
    var closedAlerts = [];

    $scope.closeAlert = function (index) {
        closedAlerts.push(index);
    };
    $scope.shouldShowAlert = function (index) {
        return closedAlerts.indexOf(index) < 0;
    };
}]);
})();
(function(){ 
'use strict';angular.module('dash').controller('projectGridForm', ['$scope', '$modal', '$sce', '$http', function ($scope, $modal, $sce, $http) {
    $scope.checkParameters = function (buttonName, buttonValue, parametersUrl) {

        $scope.modalContents = $sce.trustAsHtml('<i class="fa fa-spinner fa-spin fa-2x"></i>');
        $scope.modalHeader = 'Checking for parameters...';

        var modalInstance = $modal.open({
            scope: $scope,
            template: '<div class="modal-header">' +
                '<h3 class="modal-title">{{modalHeader}}</h3>' +
                '</div><div class="modal-body" ng-bind-html="modalContents"></div>'
        });

        $http.get(parametersUrl).then(function (response) {
            if (response.data == 'NONE') {
                modalInstance.close();
                $scope.ccSubmit({name: buttonName, value: buttonValue});
            }
            $scope.modalHeader = 'Parameters';
            $scope.modalContents = $sce.trustAsHtml(response.data);
        });
    };
}]);
})();
(function(){ 
'use strict';angular.module('dash').directive('ccSubmit', function () {
	return function (scope, element) {
		scope.ccSubmit = function (extraInput) {
			if (extraInput) {
				element.append('<input type="hidden" name="' + extraInput.name + '" value="' + extraInput.value + '">');
			}
			element[0].submit();
		};
	};
});
})();